<%
  title = 'Create text'
  url = widgets_path(type: 'text')

  if @widget.persisted?
    title = 'Edit text'
    url = widget_path(type: 'text', id: @widget.id)
  end
%>

<%= simple_form_for(@widget, as: :widget, url: url, remote: true, :html => { :multipart => true }) do |f| %>

  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">&times;</button>
    <h4 class="modal-title"><%= title %></h4>
  </div>

  <div class="modal-body">
    <%= f.input :body, as: 'text', input_html: { rows: 10 },
                 hint: 'Text can be formatted with <a href="http://markdown-here.com/livedemo.html">Markdown</a>.'.html_safe %>

    <%= f.fields_for :attachments do |ff| %>
      <%= ff.input :upload, label: 'Image' %>
    <% end %>

    <%= f.input :layout, collection: ['image-left', 'image-right'] %>
  </div>

  <div class="modal-footer">
    <% if @widget.persisted? %>
      <a href="<%= widget_path(@widget) %>" data-method="delete" data-confirm="Are you sure you want to delete this widget?" tabindex="-1" class="btn btn-danger pull-left">Delete</a>
    <% end %>
    <%= f.button :submit, 'Create', class: 'btn btn-success' %>
  </div>

<% end %>

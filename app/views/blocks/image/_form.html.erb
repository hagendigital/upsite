<%
  url = blocks_path(type: 'image')
  url = block_path(type: 'image', id: @block.id) if @block.persisted?
%>

<%= simple_form_for(@block, as: :block, url: url, remote: true, :html => { multipart: true }) do |f| %>

  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">&times;</button>
    <h4 class="modal-title">Add Image</h4>
  </div>

  <div class="modal-body">
    <ul class="nav nav-tabs">
      <li class="active">
        <a href="#upload" data-toggle="tab">Upload image</a>
      </li>
      <li>
        <a href="#web" data-toggle="tab">Add image from web</a>
      </li>
    </ul>

    <div class="tab-content">
      <div id="upload" class="tab-pane active">
        <div class="form-group">
          <label class="control-label">Upload image</label>
          <div id="dropzone-wrapper" class="dropzone"></div>
          <div id="dropzone-previews"></div>
        </div>

        <div data-behavior="form-advanced" class="hidden">
          <%= f.input :link_url, label: false, hint: 'Go to this link when clicking the image (optional)', placeholder: 'http://' %>
        </div>
      </div>

      <div id="web" class="tab-pane">
        <%= f.input :embed_url, label: 'Image link', placeholder: 'instagram.com / imgur.com / giphy.com / etc.' %>
      </div>
    </div>

  </div>

  <div class="modal-footer">
    <%= f.button :submit, class: 'btn btn-success' %>
  </div>

<% end %>
